{% extends 'reader/home.html' %}

{% block content %}

<!-- Hiển thị thông báo -->
{% if messages %}
<div class="mt-3">
    {% for message in messages %}
        <div class="alert {% if message.tags == 'success' %}alert-success{% else %}alert-danger{% endif %} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
</div>
{% endif %}  
<!--
<div class="container mt-4">
    <h2 class="text-center"><i class="fas fa-user-edit    "></i>  Chỉnh sửa thông tin cá nhân</h2>
    
    <form action="{% url 'reader-sua-thongtincanhan' %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="mb-3">
            <label class="form-label">Tên đăng nhập</label>
            <input type="text" name="username" class="form-control" value="{{ user.username }}" required>
        </div>
        
        <div class="mb-3">
            <label class="form-label">Họ</label>
            <input type="text" name="first_name" class="form-control" value="{{ user.first_name }}" required>
        </div>
        
        <div class="mb-3">
            <label class="form-label">Tên</label>
            <input type="text" name="last_name" class="form-control" value="{{ user.last_name }}" required>
        </div>
        
        <div class="mb-3">
            <label class="form-label">Tên hiển thị</label>
            <input type="text" name="ten_hien_thi" class="form-control" value="{{ thong_tin.ten_hien_thi }}" required>
        </div>
        
        <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" value="{{ user.email }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Giới tính</label>
            <select name="gioi_tinh" class="form-control">
                <option value="0" {% if thong_tin.gioi_tinh == 0 %}selected{% endif %}>Nam</option>
                <option value="1" {% if thong_tin.gioi_tinh == 1 %}selected{% endif %}>Nữ</option>
                <option value="2" {% if thong_tin.gioi_tinh == 2 %}selected{% endif %}>Khác</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Ảnh đại diện</label><br>
            {% if thong_tin.anh_dai_dien %}
                <img src="{{ thong_tin.anh_dai_dien.url }}" width="100" class="mb-2"><br>
            {% endif %}
            <input type="file" name="anh_dai_dien" class="form-control">
        </div>

        <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
    </form>
</div>
-->
<div class="container mt-4">
    <h2 class="text-center"><i class="fas fa-user-edit"></i> Chỉnh sửa thông tin cá nhân</h2>
<div class="card shadow p-4">
    <div class="row">
        <div class="col-md-3 text-center">
            {% if thong_tin.anh_dai_dien %}
                <img src="{{ thong_tin.anh_dai_dien.url }}" alt="Ảnh đại diện" class="img-fluid rounded-circle" width="200">
            {% else %}
                <img src="/static/images/default-avatar.png" alt="Ảnh mặc định" class="img-fluid rounded-circle" width="200">
            {% endif %}
        </div>

        <div class="col-md-9">
            <form action="{% url 'reader-sua-thongtincanhan' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div class="mb-3">
                    <label class="form-label">Tên đăng nhập</label>
                    <input type="text" name="username" class="form-control" value="{{ user.username }}" required>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">Họ</label>
                    <input type="text" name="first_name" class="form-control" value="{{ user.first_name }}" required>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">Tên</label>
                    <input type="text" name="last_name" class="form-control" value="{{ user.last_name }}" required>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">Tên hiển thị</label>
                    <input type="text" name="ten_hien_thi" class="form-control" value="{{ thong_tin.ten_hien_thi }}" required>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" name="email" class="form-control" value="{{ user.email }}" required>
                </div>
        
                <div class="mb-3">
                    <label class="form-label">Giới tính</label>
                    <select name="gioi_tinh" class="form-control">
                        <option value="0" {% if thong_tin.gioi_tinh == 0 %}selected{% endif %}>Nam</option>
                        <option value="1" {% if thong_tin.gioi_tinh == 1 %}selected{% endif %}>Nữ</option>
                        <option value="2" {% if thong_tin.gioi_tinh == 2 %}selected{% endif %}>Khác</option>
                    </select>
                </div>
        
                <div class="mb-3">
                    <label class="form-label">Ảnh đại diện</label><br>
                    
                    <input type="file" name="anh_dai_dien" class="form-control">
                </div>
        
                <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
            </form>

        </div>
    </div>
</div>
</div>

<style>
    .form-label {
        font-weight: bold;
    }
    .form-control {
        margin-bottom: 10px;
    }
</style>
{% endblock %}
